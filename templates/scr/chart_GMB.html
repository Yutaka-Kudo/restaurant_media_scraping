{% extends 'scr/index.html' %}
{% load static %}


{% block head %}
<header class="top-header">
    <div class="container">
        <div class="row">
            <div class="col-sm-6">
                <div class="logo_main">
                    <!-- <a href="index.html"> -->
                    <h2>Web媒体データ取得</h2>
                    <!-- </a> -->
                </div>
            </div>
            <div class="chart_selector">
                <form action="{% url 'scraping:chart' store=store media=media %}" method="GET">
                    <input type="submit" name="move" value='before'>
                    <select name="q">
                        <option value="{{date}}">{{date}}</option>
                    </select>
                    <input type="submit" name="move" value='after'>
                </form>

                <div class="storebtn storebtn1">
                    <form action="{% url 'scraping:chart' store='fes' media=media %}" method="GET">
                        <input type="submit" value="FES">
                        <input type="hidden" name='date'  value="{{date}}">
                    </form>
                </div>
                <div class="storebtn">
                    <form action="{% url 'scraping:chart' store='garage' media=media %}" method="GET">
                        <input type="submit" value="Garage">
                        <input type="hidden" name='date'  value="{{date}}">
                    </form>
                </div>
                <div class="storebtn">
                    <form action="{% url 'scraping:chart' store='tourou' media=media %}" method="GET">
                        <input type="submit" value="灯篭">
                        <input type="hidden" name='date'  value="{{date}}">
                    </form>
                </div>
                <div class="storebtn">
                    <form action="{% url 'scraping:chart' store='wanaichi' media=media %}" method="GET">
                        <input type="submit" value="罠一目">
                        <input type="hidden" name='date'  value="{{date}}">
                    </form>
                </div>
                <div class="storebtn">
                    <form action="{% url 'scraping:chart' store='wananakame' media=media %}" method="GET">
                        <input type="submit" value="罠中目">
                        <input type="hidden" name='date'  value="{{date}}">
                    </form>
                </div>
            </div>


        </div>
    </div>
</header>
{% endblock head %}

{% block content %}

<canvas id='chart' height="120"></canvas>
<canvas id='chart2' height="120"></canvas>


<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
<script>
    const list = [];
    {% for i in xticks %}
    list.push("{{i}}")
    {% endfor %}

    new Chart(document.getElementById("chart"), {
        type: "line",
        data: {
            labels: list,
            datasets: [{

                label: "{{data1_name}}",
                data: {{ data1 }},
                borderColor: ["rgb(00, 00, 00)"],
                lineTension: 0,
                fill: false,
                // borderWidth:
            }, 
            {
                label: '{{data2_name}}',
                data: {{ data2 }},
                borderColor: ["rgb(00, 80, 255)"],
                lineTension: 0,
                fill: false,
                        // borderWidth:
            },
            {
                label: '{{data3_name}}',
                data: {{ data3 }},
                borderColor: ["rgb(00, 255, 00)"],
                lineTension: 0,
                fill: false,
                        // borderWidth:
            },
            {
                label: '{{data4_name}}',
                data: {{ data4 }},
                borderColor: ["rgb(255, 00, 00)"],
                lineTension: 0,
                fill: false,
                        // borderWidth:
            }, 

            ],
        },
        options: {
        title: {
            display: true,
            text: '{{store}}:Google My Business'
            },
            scales: {
                yAxes: [{
                    ticks: {
                        min: 0,
                        max: 25000,
                        // stepSize: ,
                    },

                }],
                xAxes: [{
                    ticks: {
                        autoSkip: false,
                        maxRotation: 70,
                        minRotation: 70,
                    },
                }],
                    
            },
        }
    });


    new Chart(document.getElementById("chart2"), {
        type: "line",
        data: {
            labels: list,
            datasets: [
            {
                label: '{{data6_name}} {{total_6}}',
                data: {{ data6 }},
                borderColor: ["rgb(200, 200, 00)"],
                lineTension: 0,
                fill: false,
                        // borderWidth:
            },

                    ],
                },
            options: {
                title: {
                    display: true,
                    text: '{{store}} {{data6_name}}'
                },
                scales: {
                    yAxes: [{
                        ticks: {
                            min: 0,
                            max: 5,
                            // stepSize: 150,
                        },

                    }],
                    xAxes: [{
                        ticks: {
                            autoSkip: false,
                            maxRotation: 70,
                            minRotation: 70,
                        },
                    }],
                },
        }
    });
</script>
{% endblock content %}