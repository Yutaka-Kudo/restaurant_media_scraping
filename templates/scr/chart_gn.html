{% extends 'scr/index.html' %}
{% load static %}

{% block head %}
<header class="top-header">
    <div class="container">
        <div class="row">
            <div class="col-sm-6">
                <div class="logo_main">
                    <h2>
                        <a href="{% url 'scraping:index' %}">店舗選択へ</a>
                    </h2>
                </div>
            </div>
            <form action="{% url 'scraping:chart' store=store media=media %}" method="GET">
                <input type="submit" name="move" value='before'>
                <select name="q" >
                    <option value="{{date}}">{{date}}</option>
                </select>
                <input type="hidden" name="daily_flg" value="True">
                <input type="submit" name="move" value='after'>
            </form>


            <div class="storebtn storebtn1">
                <form action="{% url 'scraping:chart' store='fes' media=media %}" method="GET">
                    <input type="submit" value="FES">
                    <input type="hidden" name='date'  value="{{date}}">
                    <input type="hidden" name="daily_flg" value="True">
                </form>
            </div>
            <div class="storebtn">
                <form action="{% url 'scraping:chart' store='garage' media=media %}" method="GET">
                    <input type="submit" value="Garage">
                    <input type="hidden" name='date'  value="{{date}}">
                    <input type="hidden" name="daily_flg" value="True">
                </form>
            </div>
            <div class="storebtn">
                <form action="{% url 'scraping:chart' store='tourou' media=media %}" method="GET">
                    <input type="submit" value="灯篭">
                    <input type="hidden" name='date'  value="{{date}}">
                    <input type="hidden" name="daily_flg" value="True">
                </form>
            </div>
            <div class="storebtn">
                <form action="{% url 'scraping:chart' store='wanaichi' media=media %}" method="GET">
                    <input type="submit" value="罠一目">
                    <input type="hidden" name='date'  value="{{date}}">
                    <input type="hidden" name="daily_flg" value="True">
                </form>
            </div>
            <div class="storebtn">
                <form action="{% url 'scraping:chart' store='wananakame' media=media %}" method="GET">
                    <input type="submit" value="罠中目">
                    <input type="hidden" name='date'  value="{{date}}">
                    <input type="hidden" name="daily_flg" value="True">
                </form>
            </div>

        </div>
    </div>
</header>
{% endblock head %}

{% block content %}



<canvas id='chart' height="120"></canvas>
<canvas id='chart2' height="120"></canvas>
<canvas id='chart3' height="120"></canvas>
<canvas id='chart4' height="120"></canvas>
<canvas id='chart5' height="120"></canvas>


<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
<script>
    const list = [];
    {% for i in xticks %}
    list.push("{{i}}")
    {% endfor %}

    new Chart(document.getElementById("chart"), {
        type: "line",
        data: {
            labels: list,
            datasets: [{

                label: "合計PV {{total_1}}",
                data: {{ total }},
                borderColor: ["rgb(00, 00, 00)"],
                lineTension: 0,
                fill: false,
                // borderWidth:
            }, 
            {
                label: '{{data5_name}} {{total_5}}',
                data: {{ data5 }},
                borderColor: ["rgb(00, 80, 255)"],
                lineTension: 0,
                fill: false,
                        // borderWidth:
            },

            ],
        },
        options: {
            title: {
                display: true,
                text: '{{store}}:{{media}}'
            },
            scales: {
                yAxes: [{
                    ticks: {
                        min: 0,
                        max: 700,
                        stepSize: 100,
                    },

                }],
                xAxes: [{
                    ticks: {
                        autoSkip: false,
                        maxRotation: 70,
                        minRotation: 70,
                    }
                }]
            },
        },
    });


    new Chart(document.getElementById("chart2"), {
        type: "line",
        data: {
            labels: list,
            datasets: [

            {
                label: '{{data2_name}} {{total_2}}',
                data: {{ data2 }},
                borderColor: ["rgb(00, 255, 00)"],
                lineTension: 0,
                fill: false,
                        // borderWidth:
            },
            {
                label: '{{data3_name}} {{total_3}}',
                data: {{ data3 }},
                borderColor: ["rgb(255, 00, 00)"],
                lineTension: 0,
                fill: false,
                        // borderWidth:
            },

            {
                label: '{{data4_name}} {{total_4}}',
                data: {{ data4 }},
                borderColor: ["rgb(200, 200, 00)"],
                lineTension: 0,
                fill: false,
                        // borderWidth:
            },

                    ],
                },
                options: {
                    title: {
                display: true,
                text: '{{store}}:{{media}}'
            },
                    scales: {
                        yAxes: [{
                            ticks: {
                                min: 0,
                                max: 700,
                                // stepSize: 10,
                            },

                        }],
                xAxes: [{
                    ticks: {
                        autoSkip: false,
                        maxRotation: 70,
                        minRotation: 70,
                    }
                }]
            },

                }
    });

    new Chart(document.getElementById("chart3"), {
        type: "line",
        data: {
            labels: list,
            datasets: [

            {
                label: '{{data6_name}} {{total_6}}',
                data: {{ data6 }},
                borderColor: ["rgb(00, 255, 00)"],
                lineTension: 0,
                fill: false,
                        // borderWidth:
            },
            {
                label: '{{data7_name}} {{total_7}}',
                data: {{ data7 }},
                borderColor: ["rgb(255, 00, 00)"],
                lineTension: 0,
                fill: false,
                        // borderWidth:
            },

            {
                label: '{{data8_name}} {{total_8}}',
                data: {{ data8 }},
                borderColor: ["rgb(200, 200, 00)"],
                lineTension: 0,
                fill: false,
                        // borderWidth:
            },

                    ],
                },
                options: {
                    title: {
                display: true,
                text: '{{store}}:{{media}}'
            },
                    scales: {
                        yAxes: [{
                            ticks: {
                                min: 0,
                                max: 100,
                                // stepSize: 10,
                            },

                        }],
                xAxes: [{
                    ticks: {
                        autoSkip: false,
                        maxRotation: 70,
                        minRotation: 70,
                    }
                }]
            },

                }
    });

    new Chart(document.getElementById("chart4"), {
        type: "line",
        data: {
            labels: list,
            datasets: [

            {
                label: '{{data21_name}} {{total_21}}',
                data: {{ data21 }},
                borderColor: ["rgb(00, 255, 00)"],
                lineTension: 0,
                fill: false,
                        // borderWidth:
            },
            {
                label: '{{data22_name}} {{total_22}}',
                data: {{ data22 }},
                borderColor: ["rgb(255, 00, 00)"],
                lineTension: 0,
                fill: false,
                        // borderWidth:
            },


                    ],
                },
                options: {
                    title: {
                display: true,
                text: '{{store}}:{{media}}'
            },
                    scales: {
                        yAxes: [{
                            ticks: {
                                min: 0,
                                max: 30,
                                // stepSize: 10,
                            },

                        }],
                xAxes: [{
                    ticks: {
                        autoSkip: false,
                        maxRotation: 70,
                        minRotation: 70,
                    }
                }]
            },

                }
    });


    new Chart(document.getElementById("chart5"), {
        type: "line",
        data: {
            labels: list,
            datasets: [

            {
                label: '{{data9_name}} {{total_9}}',
                data: {{ data9 }},
                borderColor: ["rgb(00, 255, 00)"],
                lineTension: 0,
                fill: false,
                        // borderWidth:
            },
            {
                label: '{{data13_name}} {{total_13}}',
                data: {{ data13 }},
                borderColor: ["rgb(255, 00, 00)"],
                lineTension: 0,
                fill: false,
                        // borderWidth:
            },

            {
                label: '{{data17_name}} {{total_17}}',
                data: {{ data17 }},
                borderColor: ["rgb(150, 150, 00)"],
                lineTension: 0,
                fill: false,
                // borderWidth:
            },
            {
                label: '{{data18_name}} {{total_18}}',
                data: {{ data18 }},
                borderColor: ["rgb(180, 180, 00)"],
                lineTension: 0,
                fill: false,
                // borderWidth:
                hidden: true,
            },
            {
                label: '{{data19_name}} {{total_19}}',
                data: {{ data19 }},
                borderColor: ["rgb(220, 220, 00)"],
                lineTension: 0,
                fill: false,
                // borderWidth:
                hidden: true,
            },
            {
                label: '{{data20_name}} {{total_20}}',
                data: {{ data20 }},
                borderColor: ["rgb(250, 250, 00)"],
                lineTension: 0,
                fill: false,
                // borderWidth:
                hidden: true,
            },

                    ],
                },
                options: {
                    title: {
                display: true,
                text: '{{store}}:{{media}}'
            },
                    scales: {
                        yAxes: [{
                            ticks: {
                                min: 0,
                                max: 100,
                                // stepSize: 10,
                            },

                        }],
                xAxes: [{
                    ticks: {
                        autoSkip: false,
                        maxRotation: 70,
                        minRotation: 70,
                    }
                }]
            },

                }
    });


</script>
{% endblock content %}